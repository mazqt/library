<!DOCTYPE html>
<html>

<head>
  <title>Page Title</title>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <h1 class="">My Little Library</h1>
  <div id="books">

  </div>

  <div class="form">
    <button id="formToggle">New book</button>
    <div class="bookForm" id="bookForm">
      <form>
        <label for="title">Title:</label><br>
        <input type="text" id="title" name="title" required><br>
        <label for="author">Author:</label><br>
        <input type="text" id="author" name="author" required><br>
        <label for="page_count">Page Count:</label><br>
        <input type="text" id="page_count" name="page_count" required><br>
        <label for="read">Read?:</label><br>
        <select id="read" name="read" required>
          <option value="true">Yes, I've already read it</option>
          <option value="false">No, not yet!</option>
        </select><br>
        <button type="submit">Add new book to the library</button>
      </form>
    </div>
  </div>

  <script>
    const container = document.querySelector('#books');
    const form = document.forms[0];

    let myLibrary = [{
      "title": "Dune",
      "author": "Frank Herbert",
      "page_count": 412,
      "read": true
    },{
      "title": "Dune Messiah",
      "author": "Frank Herbert",
      "page_count": 256,
      "read": false
    }];

      function Book(title, author, page_count, read) {
        this.title = title;
        this.author = author;
        this.page_count = page_count;
        this.read = read;
      }

      function addBookToLibrary(book) {
        myLibrary.push(book);
      }

      const bookList = document.createElement("ul");

      myLibrary.forEach(book => {
        var bookDesc =  book.title + " is a book written by " + book.author + ", it clocks in at " + book.page_count + " pages long.";
         if (book.read) {
          bookDesc += " I have read it."
        } else {
          bookDesc += " I have not yet read it"
        }
        console.log(bookDesc);
        var div = document.createElement('li');
        div.textContent = bookDesc;
        bookList.appendChild(div);
      })

      container.appendChild(bookList);

      document.getElementById("formToggle").onclick = function() {
        document.getElementById("bookForm").classList.toggle("show");
      };

      form.addEventListener("submit", function(event) {
        event.preventDefault();
        var formData = new FormData(this);
        var newBook = new Book(formData.get("title"), formData.get("author"), formData.get("page_count"), formData.get("read"))
        console.log(newBook);
        this.reset;
      });
  </script>
</body>

</html>
